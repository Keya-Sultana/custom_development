<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record model="ir.ui.view" id="view_stock_picking_form_inherit">
        <field name="name">stock.picking.inherit.form1</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="gate_in_no" attrs="{'invisible': [('picking_type_code', '!=', 'incoming')]}"/>
            </xpath>
			<xpath expr="//header/button[@name='do_new_transfer']" position="replace">
				<button name="do_new_transfer" states="draft,partially_available,assigned" string="Validate"
						groups="stock.group_stock_user,yuko_inventory.group_stock_qc_user" type="object" class="oe_highlight"/>
            </xpath>
        </field>
    </record>

		<!-- Indent Issued Window Action -->
		<record id='action_indent_issue' model='ir.actions.act_window'>
			<field name="name">Indents Issued</field>
			<field name="res_model">indent.indent</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('state','=','received')]</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
					Here you can see Indent Issued list.
				</p>
			</field>
		</record>

		<menuitem action="action_indent_issue" name="Indent Issued"
				  parent="stock_indent.menu_indent_indent_main" id="menu_indent_issue" sequence="4"
				  groups="stock.group_stock_user"/>

        <!-- Indent Rejected Window Action -->
		<record id='action_indent_rejected' model='ir.actions.act_window'>
			<field name="name">Indents Rejected</field>
			<field name="res_model">indent.indent</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('state','=','reject')]</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
					Here you can see Indent Rejected list.
				</p>
			</field>
		</record>

		<menuitem action="action_indent_rejected" name="Indent Rejected"
				  parent="stock_indent.menu_indent_indent_main" id="menu_indent_rejected" sequence="5"
				  groups="stock.group_stock_user"/>


		<record id="inherit_view_stock_indent_indent_form" model="ir.ui.view">
			<field name="name">indent.indent.form</field>
			<field name="model">indent.indent</field>
			<field name="inherit_id" ref="stock_indent.view_stock_indent_indent_form"/>
			<field name="arch" type="xml">
				<data>
					<xpath expr="//group/group/field[@name='indent_type']" position="replace"></xpath>
					<field name="required_date" position="replace">
                    	<field name="required_date" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                	</field>
					<field name="picking_type_id" position="replace">
                    	<field name="picking_type_id" options="{&quot;no_open&quot;: True}" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                	</field>
                    <xpath expr="//group/group/field[@name='indentor_id']" position="replace">
                        <field name="employee_id"/>
						<field name="depart_id"/>
                    </xpath>
					<xpath expr="//notebook/page[1]" position="replace">
						<page string="Products">
								<field name="product_lines" attrs="{'readonly': [('state','not in',('draft'))]}">
									<tree string="Products" editable="bottom">
										<field name="sequence" widget="handle"/>
										<field name="category_id" domain="[('type','!=','view')]" options="{'no_create': True,'no_open':True}"/>
										<field name="product_id" domain="[('type','!=','service')]" options="{'no_create': True,'no_open':True}"/>
										<field name="name" readonly="1" />
										<field name="qty_available" invisible="1"/>
										<field name="qty_available_now" readonly="1" groups="stock.group_stock_user,stock_indent.group_stock_indent_approver"/>
										<field name="product_uom" string="UOM"/>
										<field name="product_uom_qty" sum="Total Qty"/>
										<field name="received_qty" sum="Total Receive Qty" readonly="1"/>
										<field name="issue_qty" invisible="1"/>
										<field name="price_unit" invisible="1"/>
										<field name="remarks"/>
										<!--<field name="price_subtotal" sum="Total Price"/>-->
									</tree>
								</field>
								<!--<group class="oe_subtotal_footer oe_right">-->
								<!--<field name="amount_total" widget="monetary"-->
								<!--class="oe_subtotal_footer_separator" options="{'currency_field': 'currency_id'}" />-->
								<!--</group>-->
							<group>
								<group>

								<field name="material_required_for" class="oe_inline" placeholder="The material is required for..." />
								</group>
								<group>

								<field name="rejection_reason" class="oe_inline" attrs="{'readonly': [('state', '=', 'received')]}" placeholder="The material is rejection reason..." />
							</group>
							</group>
							</page>
					</xpath>
                </data>
			</field>
		</record>

		<!--Quality Control Menu -->
    	<menuitem id="stock_picking_extend.menu_receive_picking_qc"
              name="Quality Control"
              parent="stock.menu_stock_warehouse_mgmt"
              sequence="3"
              action="stock_picking_extend.action_stock_picking_receive_qc"
				  groups="stock.group_stock_user,yuko_inventory.group_stock_qc_user"/>

        <!-- Indent Tree View -->
		<record id='inherit_view_indent_indent_tree' model='ir.ui.view'>
			<field name="name">indent.indent.tree</field>
			<field name="model">indent.indent</field>
            <field name="inherit_id" ref="stock_indent.view_indent_indent_tree"/>
			<field name="arch" type="xml">
				<xpath expr="//tree" position="replace">
					<tree string="Indents" ecoration-bf="message_needaction == True"
					  colors="gray:state=='received';green:state=='waiting_approval';blue:state=='inprogress';gold:state=='reject';red:state == 'cancel';">
					<field name="name" />
					<field name="indentor_id" />
					<field name="stock_location_id" />
					<field name="indent_date" />
					<field name="required_date" />
					<field name="approve_date" />
					<field name="state" />
					<field name="message_needaction" invisible="1"/>
				</tree>
				</xpath>
			</field>
		</record>

    </data>
</openerp>
